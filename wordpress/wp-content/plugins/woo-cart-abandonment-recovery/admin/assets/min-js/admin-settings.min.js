!function(_){CartAbandonmentSettings={init(){_("#wcf_ca_custom_filter_from").datepicker({dateFormat:"yy-mm-dd",maxDate:"0",onClose(e){jQuery("#wcf_ca_custom_filter_to").datepicker("option","minDate",e)}}).attr("readonly","readonly").css("background","white"),_("#wcf_ca_custom_filter_to").datepicker({dateFormat:"yy-mm-dd",maxDate:"0",onClose(e){jQuery("#wcf_ca_custom_filter_from").datepicker("option","maxDate",e)}}).attr("readonly","readonly").css("background","white"),_("#wcf_ca_custom_filter").on("click",function(){var e=_("#wcf_ca_custom_filter_from").val().trim(),t=_("#wcf_ca_custom_filter_to").val().trim(),c=(c=window.location.search)+"&from_date="+e+"&to_date="+t+"&filter=custom";window.location.href=c}),_("#wcf_search_id_submit").on("click",function(){var e=_("#wcf_search_id_search_input").val().trim();window.location.href=window.location.search+"&search_term="+e}),_("#wcf_ca_discount_type, #wcf_ca_coupon_amount, #wcf_ca_coupon_expiry, #wcf_ca_zapier_cart_abandoned_webhook, #wcf_ca_coupon_code_status, #wcf_ca_gdpr_message").closest("tr").hide(),_("#wcf_ca_gdpr_status:checked").length&&_("#wcf_ca_gdpr_message").closest("tr").show(),_("#wcf_ca_zapier_tracking_status:checked").length&&_("#wcf_ca_zapier_cart_abandoned_webhook, #wcf_ca_coupon_code_status").closest("tr").show(),_("#wcf_ca_coupon_code_status:checked").length&&_("#wcf_ca_zapier_tracking_status:checked").length&&_("#wcf_ca_discount_type, #wcf_ca_coupon_amount, #wcf_ca_coupon_expiry").closest("tr").show(),_("#wcf_ca_coupon_code_status").on("click",function(){_("#wcf_ca_coupon_code_status:checked").length?_("#wcf_ca_discount_type, #wcf_ca_coupon_amount, #wcf_ca_coupon_expiry").closest("tr").fadeIn():_("#wcf_ca_discount_type, #wcf_ca_coupon_amount, #wcf_ca_coupon_expiry").closest("tr").fadeOut()}),_("#wcf_ca_gdpr_status").on("click",function(){_("#wcf_ca_gdpr_status:checked").length?_("#wcf_ca_gdpr_message").closest("tr").fadeIn():_("#wcf_ca_gdpr_message").closest("tr").fadeOut()}),_("#wcf_ca_zapier_tracking_status").on("click",function(){_("#wcf_ca_zapier_tracking_status:checked").length?_("#wcf_ca_zapier_cart_abandoned_webhook, #wcf_ca_coupon_code_status").closest("tr").fadeIn():_("#wcf_ca_zapier_cart_abandoned_webhook, #wcf_ca_coupon_code_status").closest("tr").fadeOut(),_("#wcf_ca_coupon_code_status:checked").length&&_("#wcf_ca_zapier_tracking_status:checked").length?_("#wcf_ca_discount_type, #wcf_ca_coupon_amount, #wcf_ca_coupon_expiry").closest("tr").fadeIn():_("#wcf_ca_discount_type, #wcf_ca_coupon_amount, #wcf_ca_coupon_expiry").closest("tr").fadeOut()}),_("#wcf_ca_send_recovery_report_emails_to_admin:checked").length||_("#wcf_ca_admin_email").closest("tr").hide(),_("#wcf_ca_send_recovery_report_emails_to_admin").on("click",function(){_("#wcf_ca_send_recovery_report_emails_to_admin:checked").length?_("#wcf_ca_admin_email").closest("tr").fadeIn():_("#wcf_ca_admin_email").closest("tr").fadeOut()})}},ZapierSettings={init(){_(document).on("click","#wcf_ca_trigger_web_hook_abandoned_btn",{order_status:"abandoned"},ZapierSettings.zapier_trigger_sample)},zapier_trigger_sample(t){var e,c=_("#wcf_ca_zapier_cart_"+t.data.order_status+"_webhook").val().trim();c.length?(_("#wcf_ca_"+t.data.order_status+"_btn_message").text(wcf_ca_details.strings.trigger_process).fadeIn(),""!==_.trim(c)?(e={first_name:wcf_ca_details.name,last_name:wcf_ca_details.surname,email:wcf_ca_details.email,phone:wcf_ca_details.phone,order_status:t.data.order_status,checkout_url:window.location.origin+"/checkout/?wcf_ac_token=something",coupon_code:"abcgefgh",product_names:"Product1, Product2 & Product3",cart_total:wcf_ca_details.woo_currency_symbol+"20",product_table:'<table align= left; cellpadding="10" cellspacing="0" style="float: none; border: 1px solid #e5e5e5;"> <tr align="center"> <th style="color: #636363; border: 1px solid #e5e5e5;">Item</th> <th style="color: #636363; border: 1px solid #e5e5e5;">Name</th> <th style="color: #636363; border: 1px solid #e5e5e5;">Quantity</th> <th style="color: #636363; border: 1px solid #e5e5e5;">Price</th> <th style="color: #636363; border: 1px solid #e5e5e5;">Line Subtotal</th> </tr> <tr style=color: #636363; border: 1px solid #e5e5e5; align="center"> <td style="color: #636363; border: 1px solid #e5e5e5;"><img class="demo_img" style="height: 42px; width: 42px;" src="#"></td> <td style="color: #636363; border: 1px solid #e5e5e5;">Product1</td> <td style="color: #636363; border: 1px solid #e5e5e5;"> 1 </td> <td style="color: #636363; border: 1px solid #e5e5e5;">&pound;85.00</td> <td style="color: #636363; border: 1px solid #e5e5e5;" >&pound;85.00</td> </tr> </table>'},_.ajax({url:c,type:"POST",data:e,success(e){ZapierSettings.handle_zapier_response(e)?_("#wcf_ca_"+t.data.order_status+"_btn_message").text(wcf_ca_details.strings.trigger_success).css("color","#46b450"):_("#wcf_ca_"+t.data.order_status+"_btn_message").text(wcf_ca_details.strings.trigger_failed).css("color","#dc3232"),_("#wcf_ca_"+t.data.order_status+"_btn_message").fadeIn().delay(2e3).fadeOut()},error(){_("#wcf_ca_"+t.data.order_status+"_btn_message").text(wcf_ca_details.strings.trigger_failed).css("color","#dc3232")}})):_("wcf_ca"+t.data.order_status+"_btn_message").text(wcf_ca_details.strings.verify_url).fadeIn().delay(2e3).fadeOut()):_("#wcf_ca_"+t.data.order_status+"_btn_message").text(wcf_ca_details.strings.verify_url_error).fadeIn().css("color","#dc3232").delay(2e3).fadeOut()},handle_zapier_response(e){let t=!1;return"object"==typeof e&&["success","accepted"].includes(e.status)?t=!0:"string"==typeof e&&(e=e.toLowerCase(),["success","accepted"].includes(e)&&(t=!0)),t}},ToolTipHover={init(){_(".wcf-ca-report-table-row .wcf-ca-icon-row").on("hover",function(){_(this).find(".wcf-ca-tooltip-text").toggleClass("display_tool_tip")})}},_(function(){CartAbandonmentSettings.init(),ZapierSettings.init(),ToolTipHover.init()})}(jQuery);