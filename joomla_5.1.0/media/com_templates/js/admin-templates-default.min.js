/**
 * @copyright   (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
 */document.addEventListener("DOMContentLoaded",()=>{const s=document.querySelectorAll(".folder-url, .component-folder-url, .plugin-folder-url, .layout-folder-url"),u=document.querySelectorAll(".folder ul, .component-folder ul, .plugin-folder ul, .layout-folder ul"),f=document.querySelectorAll(".show > ul"),a=document.querySelectorAll("#fileModal .folder-url"),d=document.querySelectorAll("#folderModal .folder-url");u.forEach(e=>{e.classList.add("hidden")}),f.forEach(e=>{e.classList.remove("hidden")}),s.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const l=t.currentTarget.parentNode.querySelector("ul");l&&(l.classList.contains("hidden")?l.classList.remove("hidden"):l.classList.add("hidden"))})}),a.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),a.forEach(r=>{r.classList.remove("selected")}),t.currentTarget.classList.add("selected");const l=t.currentTarget.dataset.base==="media"?1:0;document.querySelectorAll("#fileModal input.address").forEach(r=>{r.value=t.currentTarget.getAttribute("data-id")}),document.querySelectorAll('#fileModal input[name="isMedia"]').forEach(r=>{r.value=l})})}),d.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),d.forEach(r=>{r.classList.remove("selected")}),t.currentTarget.classList.add("selected");const l=t.currentTarget.dataset.base==="media"?1:0;document.querySelectorAll("#folderModal input.address").forEach(r=>{r.value=t.currentTarget.getAttribute("data-id")}),document.querySelectorAll('#folderModal input[name="isMedia"]').forEach(r=>{r.value=l})})});const c=document.querySelector("#treeholder .treeselect").querySelectorAll(".folder.show");if(document.querySelector("p.lead.hidden.path")){let e=document.querySelector("p.lead.hidden.path").innerText;e&&e.charAt(0)==="/"&&(e=e.slice(1),e=e.split("/"),e=e[e.length-1],c.forEach((t,l)=>{t.querySelector("a").classList.add("active"),l===c.length-1&&t.querySelector("ul").querySelectorAll("li").forEach(m=>{const n=m.querySelector("a"),i=n.querySelector("span");i&&i.innerText.trim()&&n.classList.add("active")})}))}const o=document.getElementById("image-crop");if(o){const e=document.getElementById("imageWidth").value,t=document.getElementById("imageHeight").value;new window.Cropper(o,{viewMode:1,scalable:!0,zoomable:!1,movable:!1,dragMode:"crop",cropBoxMovable:!0,cropBoxResizable:!0,autoCrop:!0,autoCropArea:1,background:!0,center:!0,minCanvasWidth:e,minCanvasHeight:t}),o.addEventListener("crop",l=>{document.getElementById("x").value=l.detail.x,document.getElementById("y").value=l.detail.y,document.getElementById("w").value=l.detail.width,document.getElementById("h").value=l.detail.height})}});
